<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trips Countdown Widget</title>

    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: start;
            margin: 0;
            padding: 15px;
            background: transparent;
            color: #242424;
        }

        #trips-container {
            width: 100%;
            max-width: 1000px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .trip-card {
            padding: 15px;
            border-radius: 10px;
            background-color: #ffffff;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            text-align: center;
        }

        h2 {
            margin: 0 0 8px 0;
            font-size: 1em;
            font-weight: 600;
        }

        .date-info {
            font-size: 0.8em;
            margin-bottom: 10px;
            color: #6a6a6a;
        }

        .progress-bar-container {
            width: 100%;
            height: 20px;
            border-radius: 10px;
            overflow: hidden;
            background: #e0e0e0;
        }

        .progress-bar {
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 0.75em;
            text-shadow: 0 1px 2px black;
            transition: width 0.8s ease;
        }

        .days-left {
            font-size: 0.85em;
            margin-top: 8px;
            font-weight: 500;
        }

        @media (prefers-color-scheme: dark) {
            body { color: #eaeaea; }
            .trip-card { background-color: #2f3437; }
            .date-info { color: #cccccc; }
            .progress-bar-container { background: #555; }
        }
    </style>
</head>
<body>

    <div id="trips-container"></div>

    <script>
        // =============================
        // SUA LISTA DE VIAGENS
        // =============================
        const TRIPS = [
            { title: "‚úàÔ∏è Guarulhos ‚Üí Lisboa",      date: "2025-12-19" },
            { title: "‚úàÔ∏è Lisboa ‚Üí Madri",          date: "2025-12-23" },
            { title: "‚úàÔ∏è Madri ‚Üí Paris",           date: "2025-12-27" },
            { title: "üöÑ Paris ‚Üí Londres",          date: "2026-01-02" },
            { title: "‚úàÔ∏è Londres ‚Üí Roma",          date: "2026-01-08" },
            { title: "üö¢ In√≠cio do Cruzeiro",       date: "2026-01-15" },
            { title: "‚úàÔ∏è Roma ‚Üí Madri",            date: "2026-01-22" },
            { title: "‚úàÔ∏è Madri ‚Üí Lisboa",          date: "2026-01-22" },
            { title: "‚úàÔ∏è Lisboa ‚Üí Guarulhos",      date: "2026-01-22" }
        ];

        const container = document.getElementById("trips-container");

        function calculateProgress(destinationDate) {
            const dest = new Date(destinationDate + "T00:00:00");
            const today = new Date();

            const totalMs = dest.getTime() - today.getTime();
            const totalDays = Math.ceil(totalMs / (1000 * 60 * 60 * 24));

            let progress = 100 - ((totalDays / (totalDays + 1)) * 100);
            if (progress < 0) progress = 0;
            if (progress > 100) progress = 100;

            return {
                progress: progress.toFixed(1),
                daysLeft: totalDays
            };
        }

        function render() {
            container.innerHTML = "";

            TRIPS.forEach(trip => {
                const { progress, daysLeft } = calculateProgress(trip.date);
                let label = "";
                let color = "#27ae60";

                if (daysLeft > 0) {
                    label = `Faltam ${daysLeft} dias`;
                } else if (daysLeft === 0) {
                    label = "√â HOJE!";
                    color = "#3498db";
                } else {
                    label = "Conclu√≠da";
                    color = "#3498db";
                }

                const card = `
                    <div class="trip-card">
                        <h2>${trip.title}</h2>
                        <p class="date-info">${new Date(trip.date).toLocaleDateString("pt-BR")}</p>

                        <div class="progress-bar-container">
                            <div class="progress-bar" style="width:${progress}%; background:${color}">
                                ${progress}%
                            </div>
                        </div>

                        <p class="days-left">${label}</p>
                    </div>
                `;

                container.innerHTML += card;
            });

            setTimeout(render, 3600000); // 1h
        }

        render();
    </script>

</body>
</html>
