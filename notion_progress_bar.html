<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Widget Viagens</title>

<style>
    body {
        font-family: sans-serif;
        background: transparent;
        margin: 0;
        padding: 20px;
        display: flex;
        justify-content: center;
    }

    #trips-container {
        width: 100%;
        max-width: 1000px;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
        gap: 15px;
    }

    .trip-card {
        background: #fff;
        padding: 15px;
        border-radius: 12px;
        box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        text-align: center;
    }

    h2 {
        margin: 0 0 5px 0;
        font-size: 1.1rem;
    }

    .date-info {
        color: #666;
        font-size: .9rem;
        margin-bottom: 10px;
    }

    .progress-wrapper {
        position: relative;
        width: 100%;
        height: 25px;
        background: #e0e0e0;
        border-radius: 20px;
        overflow: hidden;
        margin-bottom: 10px;
    }

    .progress-fill {
        height: 100%;
        background: #4caf50;
        width: 0%;
        transition: width 0.6s ease;
    }

    .progress-emoji {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        font-size: 20px;
        pointer-events: none;
        transition: left .6s ease;
    }

    .days-left {
        color: #333;
        font-weight: 500;
    }
</style>

</head>
<body>

<div id="trips-container"></div>

<script>
const TRIPS = [
    { title: "âœˆï¸ Guarulhos â†’ Lisboa", emoji: "âœˆï¸", date: "2025-12-18" },
    { title: "âœˆï¸ Lisboa â†’ Madri", emoji: "âœˆï¸", date: "2025-12-22" },
    { title: "âœˆï¸ Madri â†’ Paris", emoji: "âœˆï¸", date: "2025-12-26" },
    { title: "ğŸš„ Paris â†’ Londres", emoji: "ğŸš„", date: "2026-01-01" },
    { title: "âœˆï¸ Londres â†’ Roma", emoji: "âœˆï¸", date: "2026-01-07" },
    { title: "ğŸš¢ InÃ­cio do Cruzeiro", emoji: "ğŸš¢", date: "2026-01-14" },
    { title: "âœˆï¸ Roma â†’ Madri", emoji: "âœˆï¸", date: "2026-01-21" },
    { title: "âœˆï¸ Madri â†’ Lisboa", emoji: "âœˆï¸", date: "2026-01-21" },
    { title: "âœˆï¸ Lisboa â†’ Guarulhos", emoji: "âœˆï¸", date: "2026-01-21" }
];

function calculateProgress(destinationDate) {
    const today = new Date();
    today.setHours(0,0,0,0);

    const dest = new Date(destinationDate);
    dest.setHours(0,0,0,0);

    // dias totais desde hoje atÃ© a viagem
    const totalDays = Math.max(1, (dest - today) / 86400000);

    // dias restantes
    const daysLeft = Math.ceil(totalDays);

    // progresso real
    let progress = ((totalDays - daysLeft) / totalDays) * 100;

    if (progress < 0) progress = 0;
    if (progress > 100) progress = 100;

    return {
        progress,
        daysLeft,
        dateBR: dest.toLocaleDateString("pt-BR")
    };
}

function renderTrips() {
    const container = document.getElementById("trips-container");
    container.innerHTML = "";

    TRIPS.forEach(trip => {
        const r = calculateProgress(trip.date);

        const card = `
        <div class="trip-card">
            <h2>${trip.title}</h2>
            <p class="date-info">${r.dateBR}</p>

            <div class="progress-wrapper">
                <div class="progress-fill" style="width:${r.progress}%"></div>
                <div class="progress-emoji" style="left: calc(${r.progress}% - 10px);">
                    ${trip.emoji}
                </div>
            </div>

            <p class="days-left">Faltam ${r.daysLeft} dias</p>
        </div>
        `;

        container.innerHTML += card;
    });

    // atualiza automaticamente a cada 1h
    setTimeout(renderTrips, 3600000);
}

renderTrips();
</script>

</body>
</html>
